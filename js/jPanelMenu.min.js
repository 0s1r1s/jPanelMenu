(function(e){e.jPanelMenu=function(t){if(typeof t=="undefined"||t==null)t={};var n={options:e.extend({trigger:".menu-trigger",menu:"#menu",keyboardShortcuts:!0,transitionsSupported:"WebkitTransition"in document.body.style||"MozTransition"in document.body.style||"msTransition"in document.body.style||"OTransition"in document.body.style||"Transition"in document.body.style,shiftFixedChildren:!1,openPosition:75,duration:150,openDuration:t.duration||150,closeDuration:t.duration||150,easing:"swing",openEasing:t.easing||"swing",closeEasing:t.easing||"swing",before:function(){console.log("jP.options.before();")},beforeOpen:function(){console.log("jP.options.beforeOpen();")},beforeClose:function(){console.log("jP.options.beforeClose();")},after:function(){console.log("jP.options.after();")},afterOpen:function(){console.log("jP.options.afterOpen();")},afterClose:function(){console.log("jP.options.afterClose();")}},t),menu:"#jPanelMenu-menu",panel:".jPanelMenu-panel",fixedChildren:[],checkFixedChildren:function(){n.disableTransitions();var t={position:e(n.panel).css("position"),left:e(n.panel).css("left")=="auto"?0:e(n.panel).css("left")};e(n.panel).find("> *").each(function(){e(this).css("position")=="fixed"&&n.fixedChildren.push(this)});if(n.fixedChildren.length>0){n.setPanelStyle({position:"relative",left:"1px"});parseInt(e(n.fixedChildren[0]).offset().left)==0&&(n.options.shiftFixedChildren=!0)}n.setPanelStyle(t)},setMenuState:function(t){var n=t?"open":"closed";e("body").attr("data-menu-position",n)},getMenuState:function(){return e("body").attr("data-menu-position")},menuIsOpen:function(){return n.getMenuState()=="open"?!0:!1},setMenuStyle:function(t){e(n.menu).css(t)},setPanelStyle:function(t){e(n.panel).css(t)},enableTransitions:function(t){var r=t/1e3;n.disableTransitions();e("body").append('<style id="jPanelMenu-style-transitions">.jPanelMenu-panel{-webkit-transition: all '+r+"s ease-in-out;-moz-transition: all "+r+"s ease-in-out;-o-transition: all "+r+"s ease-in-out;transition: all "+r+"s ease-in-out;}</style>")},disableTransitions:function(){e("#jPanelMenu-style-transitions").remove()},openMenu:function(t){n.options.before();n.options.beforeOpen();n.setMenuState(!0);if(t&&n.options.transitionsSupported||!t){t?t&&n.options.transitionsSupported&&n.enableTransitions(n.options.openDuration):n.disableTransitions();n.setPanelStyle({position:"relative",left:n.options.openPosition+"%"});t||n.enableTransitions(n.options.openDuration);n.options.after();n.options.afterOpen()}else{n.setPanelStyle({position:"relative"});e(n.panel).animate({left:n.options.openPosition+"%"},n.options.openDuration,n.options.openEasing,function(){n.options.after();n.options.afterOpen()})}},closeMenu:function(t){n.options.before();n.options.beforeClose();n.setMenuState(!1);if(t&&n.options.transitionsSupported||!t){!t&&n.options.transitionsSupported?n.disableTransitions():t&&n.options.transitionsSupported&&n.enableTransitions(n.options.closeDuration);n.setPanelStyle({left:0});setTimeout(function(){n.setPanelStyle({position:"static"})},n.options.closeDuration);!t&&n.options.transitionsSupported&&n.enableTransitions(n.options.closeDuration);n.options.after();n.options.afterClose()}else e(n.panel).animate({left:"0%"},n.options.closeDuration,n.options.closeEasing,function(){n.options.after();n.options.afterClose()})},triggerMenu:function(e){console.log(" ");console.log("--------------------------------------------------");console.log(" ");n.menuIsOpen()?n.closeMenu(e):n.openMenu(e)},initiateClickListeners:function(){e(document).on("click",n.options.trigger,function(){n.triggerMenu(!0);return!1})},destroyClickListeners:function(){e(document).off("click",n.options.trigger,null)},initiateKeyboardListeners:function(){e(document).on("keydown",function(e){switch(e.which){case 27:n.menuIsOpen()&&n.closeMenu(!0);break;case 37:n.menuIsOpen()&&n.closeMenu(!0);break;case 39:n.triggerMenu(!0);break;case 77:n.triggerMenu(!0)}return!1})},destroyKeyboardListeners:function(){e(document).off("keydown",null)},setupMarkup:function(){e("html").addClass("jPanelMenu");e("body > *").not(n.menu+", style, script").wrapAll('<div class="'+n.panel.replace(".","")+'"/>');e(n.options.menu).hide().clone().attr("id",n.menu.replace("#","")).insertAfter("body > "+n.panel)},resetMarkup:function(){e("html").removeClass("jPanelMenu");e("body > "+n.panel+" > *").unwrap();e(n.menu).remove()},init:function(){n.options.openPosition>100&&(n.options.openPosition=100);n.closeMenu();n.initiateClickListeners();n.options.keyboardShortcuts&&n.initiateKeyboardListeners();n.setMenuState(!1);n.setupMarkup();n.setMenuStyle({width:n.options.openPosition+"%"});n.checkFixedChildren()},destroy:function(){n.closeMenu();n.destroyClickListeners();n.options.keyboardShortcuts&&n.destroyKeyboardListeners();n.resetMarkup()}};return{on:n.init,off:n.destroy,trigger:n.triggerMenu,open:n.openMenu,close:n.closeMenu}}})(jQuery);